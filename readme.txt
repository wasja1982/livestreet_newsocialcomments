Плагин "New Social Comments" (версия 1.0.3) для LiveStreet 1.0.3

Основан на плагинах:
1) "OpenComments" (автор: flexbyte, модификации: iMind) - https://catalog.livestreetcms.com/addon/view/39/, https://github.com/iM1nd/opencomments
2) "Social Comments" (автор: 4ever4you) - https://catalog.livestreetcms.com/addon/view/201/


ОПИСАНИЕ

Позволяет посетителям оставлять комментарии, используя аккаунты социальных сетей, и гостевые комментарии без регистрации.
Поддерживается авторизация из социальных сетей Вконтакте и Facebook (для корректной работы необходимо получение идентификаторов для сайта).

Настройка плагина осуществляется редактированием файла "/plugins/newsocialcomments/config/config.php".

Поддерживаемые директивы:
1) $config['enabled'] - Позволяет отключать добавление гостевых комментариев без деактивации плагина.
При отключенном плагине вместо имени гостя будет отображаться guest. По умолчанию включено (true).

2) $config['ask_mail'] - Запрашивать e-mail для гостевых комментариев. По умолчанию включено (true).

3) $config['use_fb_api'] - Разрешить авторизацию через Facebook. По умолчанию разрешено (true).

4) $config['fb_id'] - Идентификатор приложения для Facebook. Уникальный идентификатор для своего сайта необходимо получить по ссылке https://developers.facebook.com/apps/?action=create

5) $config['fb_secret'] - Секретный ключ приложения для Facebook. Получается одновременно с идентификатором приложения.

6) $config['use_vk_api'] - Разрешить авторизацию через Вконтакте. По умолчанию разрешено (true).

7) $config['vk_id'] - Идентификатор приложения для Вконтакте. Уникальный идентификатор для своего сайта необходимо получить по ссылке https://vk.com/editapp?act=create

8) $config['vk_secret'] - Секретный ключ приложения для Вконтакте. Получается одновременно с идентификатором приложения.

9) $config['use_mr_api'] - Разрешить авторизацию через Mail.ru. По умолчанию разрешено (true).

10) $config['mr_id'] - Идентификатор приложения для Mail.ru. Уникальный идентификатор для своего сайта необходимо получить по ссылке http://api.mail.ru/sites/my/add/

11) $config['mr_private'] - Приватный ключ приложения для Mail.ru. Получается одновременно с идентификатором приложения.

12) $config['mr_secret'] - Секретный ключ приложения для Mail.ru. Получается одновременно с идентификатором приложения.

13) $config['use_server_check'] - Дополнительная защита от подмены данных на клиенте - запрашиваются информация о пользователе напрямую в соцсети.
Замедляет скорость добавления комментариев из-за выполнения запросов к серварам социальных сетей. По умолчанию включена (true).

14) $config['use_auto_login'] - Автоматическая проверка авторизации при загрузке страницы. По умолчанию включена (true).



УСТАНОВКА

1. Скопировать плагин в каталог /plugins/
2. Через панель управления плагинами (/admin/plugins/) запустить его активацию.
3. Активация будет успешной если пользователя с ID = 0 не существует в базе (см. prefix_user).
   В противном случае, надо выполнить вручную след. SQL запрос:
	
ALTER TABLE `prefix_comment`
        ADD  `guest_name` VARCHAR( 150 ) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL ,
        ADD  `guest_email` VARCHAR( 150 ) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
        ADD  `guest_extra` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL


4. ВНИМАНИЕ!
Если у вас стоит другой шаблон, отличный от стандартного необходимо скопировать и изменить след. файлы:
	comment_tree.tpl, comment.tpl, block.stream_comment.tpl, comment_list.tpl
в /plugins/newsocialcomments/templates/skin/<имя_вашего_шаблона>

Изменения, к-е необходимо добавить можно найти с помощью утилиты WinMerge сравнив два файла, например:
файл 1 - /plugins/newsocialcomments/templates/skin/default/comment.tpl  и
файл 2 - /templates/skin/new-jquery/comment.tpl



ИЗМЕНЕНИЯ:
1.0.3 (10.11.2013):
- Работа плагина переделана на использование хуков вместо делегации файлов шаблона.

1.0.2 (31.10.2013):
- Добавлена поддержка авторизации Mail.ru.
- Усилена защита от подмены данных на клиенте (запрос информации о пользователе осуществляется серверной частью).

1.0.1 (27.10.2013):
- Исправлены файлы шаблона.
- Исправлены неточности работы JS-скрипта.
- Добавлена защита от подмены данных на клиенте (проверка авторизации в социальной сети).



АВТОР
Александр Вереник

САЙТ 
https://github.com/wasja1982/livestreet_newsocialcomments
